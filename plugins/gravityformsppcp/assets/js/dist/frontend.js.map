{"version":3,"file":"frontend.js","mappings":"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","sources":["webpack://gform-ppcp/../../@babel/runtime/helpers/regeneratorRuntime.js","webpack://gform-ppcp/../../@babel/runtime/helpers/typeof.js","webpack://gform-ppcp/../../@babel/runtime/regenerator/index.js","webpack://gform-ppcp/webpack/bootstrap","webpack://gform-ppcp/webpack/runtime/compat get default export","webpack://gform-ppcp/webpack/runtime/define property getters","webpack://gform-ppcp/webpack/runtime/hasOwnProperty shorthand","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/typeof.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/toPropertyKey.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/toPrimitive.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/defineProperty.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/createClass.js","webpack://gform-ppcp/../../../assets/js/src/legacy/state_manager.js","webpack://gform-ppcp/../../@babel/runtime/helpers/esm/classCallCheck.js","webpack://gform-ppcp/../../../assets/js/src/legacy/frontend.js"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","/* eslint-disable */\n/**\n * Class that manages state for the PayPal related fields and buttons in the front end.\n */\nexport default class PPCPStateManager {\n\tconstructor( initialState, stateChangeCallback ) {\n\t\tthis.state = {};\n\t\tthis.prevState = { ... initialState };\n\t\tthis.markedDirty = [];\n\n\t\tthis.timeoutID = 0;\n\t\tthis.stateChangeCallback = stateChangeCallback;\n\t\tthis.isInitialChange = true;\n\n\t\tfor ( const key in initialState ) {\n\t\t\tthis.set( key, initialState[ key ] );\n\t\t}\n\t}\n\n\t/**\n\t * Gets a state variable.\n\n\t * @param {string} key Name/key of the state variable.\n\t * @returns {*} Returns the value of the specified property.\n\t */\n\tget( key ) {\n\t\treturn this.state[ key ];\n\t}\n\n\t/**\n\t * Sets a state variable and if a change is detected, initiates the timeout to invoke the state changed callback.\n\t *\n\t * @param {string} key   Variable key/name.\n\t * @param {*}      value Variable value.\n\t */\n\tset( key, value ) {\n\t\t// Abort if no change and property hasn't been marked as dirty\n\t\tif ( this.state[ key ] === value && ! this.markedDirty.includes( key ) ) {\n\t\t\treturn;\n\t\t}\n\t\tthis._maybeClearTimeout();\n\n\t\tthis.state[ key ] = value;\n\n\t\t// If no other state prop is changed in the next 0.2 seconds, fire state change event.\n\t\tthis.timeoutID = setTimeout( this._invokeStateChanged.bind( this ), 200 );\n\t}\n\n\t/**\n\t * Manually marks a state variable as dirty, causing the state changed event to be fired next time this state variable is set.\n\t *\n\t * @param {string} key Name/key of the variable.\n\t */\n\tsetDirty( key ) {\n\t\tthis.markedDirty.push( key );\n\t}\n\n\t/**\n\t * Resets previous class variables. To be called after a state changed event is invoked.\n\t *\n\t * @private\n\t */\n\t_reset() {\n\t\tthis.prevState = { ...this.state };\n\t\tthis.timeoutID = 0;\n\t\tthis.isInitialChange = false;\n\t}\n\n\t/**\n\t * Invokes the state changed callback method.\n\t *\n\t * @private\n\t */\n\t_invokeStateChanged() {\n\t\tconst dirtyProps = this._getDirtyProps();\n\t\tthis.markedDirty = []; // Must reset markedDirty before stateChangeCallback.\n\t\tthis.stateChangeCallback( this.isInitialChange, dirtyProps, this.state, this.prevState );\n\t\tthis._reset();\n\t}\n\n\t/**\n\t * Clears the timeout Id if one is specified.\n\t *\n\t * @private\n\t */\n\t_maybeClearTimeout() {\n\t\tif ( this.timeoutID == 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timeoutID );\n\t\tthis.timeoutID = 0;\n\t}\n\n\t/**\n\t * Returns state variables that have been changed or that have been manually marked as dirty.\n\t *\n\t * @return {string[]} Returns an array with keys that have been changed or that have been manually marked as dirty.\n\t *\n\t * @private\n\t */\n\t_getDirtyProps() {\n\t\tconst dirty = [];\n\t\tfor ( const key in this.state ) {\n\t\t\tif ( this.state[ key ] != this.prevState[ key ] || this.markedDirty.includes( key ) ) {\n\t\t\t\tdirty.push( key );\n\t\t\t}\n\t\t}\n\t\treturn dirty;\n\t}\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","/* eslint-disable */\nimport PPCPStateManager from './state_manager';\n\nwindow.GFPPCP = null;\n\ngform.extensions = gform.extensions || {};\ngform.extensions.styles = gform.extensions.styles || {};\ngform.extensions.styles.gravityformsppcp = gform.extensions.styles.gravityformsppcp || {};\n\n( function( $ ) {\n\tconst gform = window.gform || {};\n\tgform.ppcp = gform.ppcp || {};\n\twindow.GFPPCP = function( args ) {\n\t\tfor ( const prop in args ) {\n\t\t\tif ( args.hasOwnProperty( prop ) ) {\n\t\t\t\tthis[ prop ] = args[ prop ];\n\t\t\t}\n\t\t}\n\n\t\tthis.cardStyle = this.cardStyle || {};\n\n\t\tgform.extensions.styles.gravityformsppcp[ this.formId ] = gform.extensions.styles.gravityformsppcp[ this.formId ] || {};\n\n\t\tconst componentStyles = gform.extensions.styles.gravityformsppcp[ this.formId ][ this.pageInstance ] || {};\n\n\t\tthis.setComponentStyleValue = function( key, value, themeFrameworkStyles, manualElement ) {\n\t\t\tlet resolvedValue = '';\n\n\t\t\t// If the value provided is a custom property let's begin\n\t\t\tif ( value.indexOf( '--' ) === 0 ) {\n\t\t\t\tconst computedValue = themeFrameworkStyles.getPropertyValue( value );\n\n\t\t\t\t// If we have a computed end value from the custom property, let's use that\n\t\t\t\tif ( computedValue ) {\n\t\t\t\t\tresolvedValue = computedValue;\n\t\t\t\t}\n\t\t\t\t// Otherwise, let's use a provided element or the form wrapper\n\t\t\t\t// along with the key to nab the computed end value for the CSS property\n\t\t\t\telse {\n\t\t\t\t\tconst selector = manualElement ? getComputedStyle( manualElement ) : themeFrameworkStyles;\n\t\t\t\t\t//const resolvedKey = key === 'fontSmoothing' ? '-webkit-font-smoothing' : key;\n\t\t\t\t\tresolvedValue = selector.getPropertyValue( key.replace( /([a-z])([A-Z])/g, '$1-$2' ).toLowerCase() );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Otherwise let's treat the provided value as the actual CSS value wanted\n\t\t\telse {\n\t\t\t\tresolvedValue = value;\n\t\t\t}\n\n\t\t\treturn resolvedValue.trim();\n\t\t};\n\n\t\tthis.setComponentStyles = function( obj, objKey, parentKey ) {\n\t\t\t// If our object doesn't have any styles specified, let's bail here\n\t\t\tif ( Object.keys( obj ).length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Grab the computed styles for the form, which the global CSS API and theme framework are scoped to\n\t\t\tconst form = document.getElementById( 'gform_' + this.formId );\n\t\t\tconst themeFrameworkStyles = getComputedStyle( form );\n\n\t\t\t// Grab the first form control in the form for fallback CSS property value computation\n\t\t\tconst firstFormControl = form.querySelector( '.gfield input' );\n\n\t\t\t// Note, this currently only supports three levels deep of object nesting.\n\t\t\tObject.keys( obj ).forEach( ( key ) => {\n\t\t\t\t// Handling of keys that are objects with additional key/value pairs\n\t\t\t\tif ( typeof obj[ key ] === 'object' ) {\n\t\t\t\t\t// Create object for top level key\n\t\t\t\t\tif ( ! parentKey ) {\n\t\t\t\t\t\tthis.cardStyle[ key ] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create object for second level key\n\t\t\t\t\tif ( parentKey ) {\n\t\t\t\t\t\tthis.cardStyle[ parentKey ][ key ] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objPath = parentKey ? parentKey : key;\n\n\t\t\t\t\t// Recursively pass each key's object through our method for continued processing\n\t\t\t\t\tthis.setComponentStyles( obj[ key ], key, objPath );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Handling of keys that are not objects and need their value to be set\n\t\t\t\tif ( typeof obj[ key ] !== 'object' ) {\n\t\t\t\t\tlet value = '';\n\t\t\t\t\t// Handling of nested keys\n\t\t\t\t\tif ( parentKey ) {\n\t\t\t\t\t\tif ( objKey && objKey !== parentKey ) {\n\t\t\t\t\t\t\t// Setting value for a key three levels into the object\n\t\t\t\t\t\t\tvalue = this.setComponentStyleValue( key, componentStyles[ parentKey ][ objKey ][ key ], themeFrameworkStyles, firstFormControl );\n\t\t\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\t\t\tthis.cardStyle[ parentKey ][ objKey ][ key ] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Setting value for a key two levels into the object\n\t\t\t\t\t\t\tvalue = this.setComponentStyleValue( key, componentStyles[ parentKey ][ key ], themeFrameworkStyles, firstFormControl );\n\t\t\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\t\t\tthis.cardStyle[ parentKey ][ key ] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Setting value for a key one level into the object\n\t\t\t\t\t\tvalue = this.setComponentStyleValue( key, componentStyles[ key ], themeFrameworkStyles, firstFormControl );\n\t\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\t\tthis.cardStyle[ key ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.setComponentStyles( componentStyles );\n\n\t\tconst self = this;\n\n\t\tself.init = function() {\n\t\t\tself.paypalButtonInstances = [];\n\t\t\tself.paymentAmount = 0;\n\t\t\tself.countryCode = '';\n\t\t\tself.form = '#gform_' + self.formId;\n\t\t\tself.GFCCField = '#field_' + self.formId + '_' + self.ccFieldId;\n\t\t\tself.submitButtonId = '#gform_submit_button_' + self.formId;\n\t\t\tself.paypalButtons = $( '#gform_ppcp_smart_payment_buttons_' + self.formId );\n\t\t\tself.orderIdField = $( '#gf_ppcp_order_id_' + self.formId );\n\t\t\tself.subscriptionIdField = $( '#gf_' + self.formId + '_ppcp_subscription_id' );\n\t\t\tself.paymentMethodField = $( '#gform_wrapper_' + self.formId + ' .gform_ppcp_payment_method select' );\n\t\t\tself.PayPalFunding = paypal.FUNDING.PAYPAL;\n\n\t\t\tself.applyPriceClass();\n\n\t\t\t// Initializing state manager.\n\t\t\tconst initialState = {\n\t\t\t\tcurrency: self.currency,\n\t\t\t\tpaymentMethod: self.paymentMethodField.val(),\n\t\t\t\tfieldVisible: true,\n\t\t\t\tsubmitVisible: true,\n\t\t\t};\n\n\t\t\tgform.ppcp.stateManager = new PPCPStateManager( initialState, self.handleStateChange.bind( this ) );\n\n\t\t\t// Binding hooks, filters and events related to the state manager.\n\t\t\tself.bindStateEvents();\n\n\t\t\t// Bind submit event for multipage forms.\n\t\t\t$( self.form ).on( 'submit', self.handleFormSubmission );\n\t\t};\n\n\t\t/**\n\t\t * Handles state change, updating UI accordingly.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {bool}  isInitialChange True if this is the first time the state has been changed. False otherwise.\n\t\t * @param {Array} changed         An array with the state keys that were changed since the last state change event ( i.e. ['paymentMethod', 'fieldVisible'] ).\n\t\t * @param {Array} state           An associative array with the current state. (i.e. { 'paymentMethod': 'Credit Card', 'buttonVisible' : true, 'fieldVisible' : false, 'activeFeed' : {...} } ).\n\t\t * @param {Array} prevState       An associative array with the previous state.\n\t\t *\n\t\t */\n\t\tself.handleStateChange = function( isInitialChange, changed, state, prevState ) {\n\t\t\t// If there is no active feed, hide all paypal fields and abort.\n\t\t\tif ( ! state.activeFeed ) {\n\t\t\t\t// Passing amount = 0 to hide fields.\n\t\t\t\tself.showHideFields( state, 0 );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Setting global payment amount.\n\t\t\tself.paymentAmount = self.getPaymentAmount( state.activeFeed, state.total );\n\n\t\t\t// Handling currency change.\n\t\t\tif ( changed.includes( 'currency' ) ) {\n\t\t\t\tself.handleCurrencyChange( isInitialChange, state, prevState );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Handling feed change.\n\t\t\tif ( changed.includes( 'activeFeed' ) ) {\n\t\t\t\tself.handleFeedChange( state );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Handling amount change.\n\t\t\tif ( changed.includes( 'total' ) ) {\n\t\t\t\tself.handleTotalChange( state );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Handling all other changes.\n\t\t\tself.handleVisibilityChange( state );\n\t\t};\n\n\t\t/**\n\t\t * Updates the UI based after a change in the current currency.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {bool}  isInitialChange True if this is the first time the state has been changed. False otherwise.\n\t\t * @param {Array} state           An associative array with the current state. (i.e. { 'paymentMethod': 'Credit Card', 'buttonVisible' : true, 'fieldVisible' : false, 'activeFeed' : {...} } ).\n\t\t * @param {Array} prevState       An associative array with the previous state.\n\t\t */\n\t\tself.handleCurrencyChange = function( isInitialChange, state, prevState ) {\n\t\t\tself.resetPayPalScript( state.currency, function() {\n\t\t\t\t// When script is loaded, adjust UI.\n\n\t\t\t\t// Render paypal credit card and smart buttons.\n\t\t\t\tself.renderPayPalFields( state.activeFeed, self.paymentAmount );\n\n\t\t\t\t// Display fields appropriately.\n\t\t\t\tself.showHideFields( state, self.paymentAmount );\n\n\t\t\t\t// Enable form.\n\t\t\t\tself.enableForm();\n\n\t\t\t\t// Remove spinner.\n\t\t\t\tself.hideFormSpinner();\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Updates the UI after a change in the active feed.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} state An associative array with the current state. (i.e. { 'paymentMethod': 'Credit Card', 'buttonVisible' : true, 'fieldVisible' : false, 'activeFeed' : {...} } ).\n\t\t */\n\t\tself.handleFeedChange = function( state ) {\n\t\t\tself.resetCardErrors();\n\n\t\t\t// Render PayPal fields (even if fields and buttons will eventually be hidden)\n\t\t\tself.renderPayPalFields( state.activeFeed, self.paymentAmount );\n\n\t\t\t// Display appropriate fields and buttons.\n\t\t\tself.showHideFields( state, self.paymentAmount );\n\t\t};\n\n\t\t/**\n\t\t * Updates the UI after a change in visibility (i.e. field conditional logic, payment method or submit button conditional logic changes).\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} state An associative array with the current state. (i.e. { 'paymentMethod': 'Credit Card', 'buttonVisible' : true, 'fieldVisible' : false, 'activeFeed' : {...} } ).\n\t\t */\n\t\tself.handleVisibilityChange = function( state ) {\n\t\t\t// Render PayPal fields if they haven't been rendered.\n\t\t\tself.ensurePayPalFieldsRendered( state.activeFeed, self.paymentAmount );\n\n\t\t\t// Display appropriate fields and buttons.\n\t\t\tself.showHideFields( state, self.paymentAmount );\n\t\t};\n\n\t\t/**\n\t\t * Updates the UI after a change in payment amount.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} state An associative array with the current state. (i.e. { 'paymentMethod': 'Credit Card', 'buttonVisible' : true, 'fieldVisible' : false, 'activeFeed' : {...} } ).\n\t\t */\n\t\tself.handleTotalChange = function( state ) {\n\t\t\t// Render PayPal fields if they haven't been rendered.\n\t\t\tself.ensurePayPalFieldsRendered( state.activeFeed, self.paymentAmount );\n\n\t\t\t// Display appropriate fields and buttons.\n\t\t\tself.showHideFields( state, self.paymentAmount );\n\n\t\t\t// Update payment amount in credit message.\n\t\t\tself.renderCreditMessage( self.paymentAmount );\n\t\t};\n\n\t\t/**\n\t\t * Returns an associative array containing payment methods that are selected and supported by the active feed.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {object} activeFeed Active feed.\n\t\t *\n\t\t * @return {Array} Returns an associative array of payment methods.\n\t\t */\n\t\tself.getPaymentMethods = function( activeFeed ) {\n\t\t\tif ( ! activeFeed.supportedPaymentMethods ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst paymentMethods = [];\n\t\t\tObject.values( activeFeed.supportedPaymentMethods ).forEach( function( paymentMethod ) {\n\t\t\t\tconst method = paymentMethod.value ? paymentMethod.value : paymentMethod;\n\t\t\t\tif ( Object.values( self.paymentMethods ).includes( method ) ) {\n\t\t\t\t\tpaymentMethods.push( method );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn paymentMethods;\n\t\t};\n\n\t\t/**\n\t\t * Displays the appropriate fields depending on the current state.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param          paymentAmount\n\t\t * @param {Array}  state         The current state array.\n\t\t * @param {string} paymentMethod Currently selected payment method.\n\t\t */\n\t\tself.showHideFields = function( state, paymentAmount ) {\n\t\t\tconst paymentMethods = state.activeFeed ? self.getPaymentMethods( state.activeFeed ) : [];\n\n\t\t\tconst isPaymentSelectorVisible = self.showHidePaymentMethodSelector( paymentMethods );\n\t\t\tconst isCreditCardEnabled = self.isCreditCardEnabled( state.activeFeed );\n\t\t\tconst hasCreditCardPaymentMethod = isPaymentSelectorVisible || ( state.paymentMethod === 'Credit Card' && isCreditCardEnabled );\n\t\t\tconst hidePayPalField = ! state.fieldVisible || paymentAmount == 0 || ! hasCreditCardPaymentMethod;\n\n\t\t\t// Display or show main PayPal field based on conditional logic or payment amount.\n\t\t\tconst fieldDisplay = hidePayPalField ? 'none' : 'block';\n\t\t\tself.showHidePayPalField( fieldDisplay );\n\n\t\t\tconst creditCardField = $( '#gform_wrapper_' + self.formId + ' .ginput_container_custom_card_fields' );\n\t\t\tif ( state.paymentMethod === 'Credit Card' ) {\n\t\t\t\t// Show credit card fields\n\t\t\t\tcreditCardField.addClass( 'ginput_container_custom_card_fields--is-active' );\n\n\t\t\t\t// Hide paypal button and restore submit button.\n\t\t\t\tself.paypalButtons.css( 'display', 'none' );\n\t\t\t\tif ( state.submitVisible ) {\n\t\t\t\t\tself.showHideSubmitButton( 'visible' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Hide credit card fields.\n\t\t\t\tcreditCardField.removeClass( 'ginput_container_custom_card_fields--is-active' );\n\n\t\t\t\tconst hidePayPalButton = ! state.fieldVisible || paymentAmount == 0 || ! self.isPayPalButtonsEnabled( state.activeFeed );\n\n\t\t\t\t// Display PayPal Button if conditional logic and amount > 0 are satisfied.\n\t\t\t\tconst buttonDisplay = hidePayPalButton || ! state.submitVisible ? 'none' : 'inline-block';\n\t\t\t\tself.paypalButtons.css( 'display', buttonDisplay );\n\n\t\t\t\tconst submitVisibility = hidePayPalButton && state.submitVisible ? 'visible' : 'hidden';\n\t\t\t\tself.showHideSubmitButton( submitVisibility );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Displays or hides the main PayPal field.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {string} display Value to be used for the CSS display property of the field. (i.e. block, none ).\n\t\t */\n\t\tself.showHidePayPalField = function( display ) {\n\t\t\tconst paypalField = $( '#gform_wrapper_' + self.formId + ' .gform_ppcp_custom_card_fields' );\n\n\t\t\tconst prevDisplay = paypalField.css( 'display' );\n\t\t\tif ( prevDisplay != display ) {\n\t\t\t\tpaypalField.css( 'display', display );\n\t\t\t\tgform.ppcp.stateManager.setDirty( 'fieldVisible' );\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Displays or hides the submit button based on the specified visibility parameter.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {string} visibility Determines the visibility of the submit button. Possible values are \"visible\" and \"hidden\".\n\t\t */\n\t\tself.showHideSubmitButton = function( visibility ) {\n\t\t\tconst submitButton = $( self.submitButtonId );\n\t\t\tsubmitButton.css( 'visibility', visibility );\n\n\t\t\tif ( visibility === 'hidden' ) {\n\t\t\t\tsubmitButton.css( 'position', 'absolute' );\n\t\t\t\tsubmitButton.css( 'left', '-9999em' );\n\t\t\t} else {\n\t\t\t\tsubmitButton.css( 'position', 'static' );\n\t\t\t\tsubmitButton.css( 'left', '0' );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Ensures PayPal Buttons and PayPal Credit Card fields are rendered\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {object} activeFeed    Current active feed.\n\t\t * @param {float}  paymentAmount Amount to be paid.\n\t\t */\n\t\tself.renderPayPalFields = function( activeFeed, paymentAmount ) {\n\t\t\t// Render PayPal credit card field only if hasn't been rendered yet.\n\t\t\tconst isCreditCardRendered = $( self.form ).data( 'ppcp-card-rendered' );\n\t\t\tif ( self.isCreditCardEnabled( activeFeed ) && ! isCreditCardRendered ) {\n\t\t\t\t// Render Credit Card Fields\n\t\t\t\tself.renderCardFields();\n\t\t\t}\n\n\t\t\tif ( self.isPayPalButtonsEnabled( activeFeed ) ) {\n\t\t\t\t// Render buttons.\n\t\t\t\tif ( jQuery( '#gform_ppcp_smart_payment_buttons_' + self.formId ).length ) {\n\t\t\t\t\tself.renderPayPalButtons( activeFeed.intent, paymentAmount );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Checks if the hosted card fields are supported.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} activeFeed Current active feed.\n\t\t */\n\t\tself.isCreditCardEnabled = function( activeFeed ) {\n\t\t\tconst paymentMethods = self.getPaymentMethods( activeFeed );\n\n\t\t\treturn typeof paypal !== 'undefined' &&\n\t\t\t\tpaypal.HostedFields.isEligible() &&\n\t\t\t\tpaymentMethods.includes( 'Credit Card' );\n\t\t};\n\n\t\t/**\n\t\t * Check if the PayPal Buttons can be displayed.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} activeFeed Current active feed.\n\t\t * @return {bool} True if PayPal buttons can be displayed. False otherwise.\n\t\t */\n\t\tself.isPayPalButtonsEnabled = function( activeFeed ) {\n\t\t\tconst paymentMethods = self.getPaymentMethods( activeFeed );\n\t\t\treturn paymentMethods.includes( 'PayPal Checkout' );\n\t\t};\n\n\t\t/**\n\t\t * Renders PayPal credit card and PayPal Buttons if they haven't been rendered yet. Do nothing if they have been rendered.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} activeFeed    Current active feed.\n\t\t * @param {float} paymentAmount Amount to be paid.\n\t\t */\n\t\tself.ensurePayPalFieldsRendered = function( activeFeed, paymentAmount ) {\n\t\t\tif ( ! self.isPayPalButtonsRendered() ) {\n\t\t\t\tself.renderPayPalFields( activeFeed, paymentAmount );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Target of gform_product_total filter. Updates the state manager every time the total changes.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {float} total  Current form total.\n\t\t * @param {int}   formId Current form id.\n\t\t *\n\t\t * @return {float} Returns the filtered total.\n\t\t */\n\t\tself.handleProductTotalFilter = function( total, formId ) {\n\t\t\tif ( formId != self.formId ) {\n\t\t\t\treturn total;\n\t\t\t}\n\n\t\t\tgform.ppcp.stateManager.set( 'total', total );\n\t\t\treturn total;\n\t\t};\n\n\t\t/**\n\t\t * Target of the gform_frontend_feeds_evaluated hook. Updates the state manager every time the frontend feeds get evaluated.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} feeds  Array of active feeds.\n\t\t * @param {int}   formId Current form id.\n\t\t */\n\t\tself.handleFrontendFeedsEvaluated = function( feeds, formId ) {\n\t\t\tif ( formId !== self.formId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst activeFeed = self.getActiveFeed( feeds );\n\t\t\tgform.ppcp.stateManager.set( 'activeFeed', activeFeed );\n\n\t\t\t// See if payment method needs to change as well.\n\t\t\tconst paymentMethods = self.getPaymentMethods( activeFeed );\n\t\t\tconst paymentMethodChanged = paymentMethods.length > 0 && ! paymentMethods.includes( self.paymentMethodField.val() );\n\t\t\tif ( paymentMethodChanged ) {\n\t\t\t\tself.paymentMethodField.find( 'option[value=\"' + paymentMethods[ 0 ] + '\"]' ).prop( 'selected', true );\n\t\t\t\tgform.ppcp.stateManager.set( 'paymentMethod', paymentMethods[ 0 ] );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Target of the gform_post_conditional_logic_field_action hook. Updates the state monitor every time conditional logic gets evaluated.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {int}    formId        Current form id.\n\t\t * @param {string} action        Possible values are \"show\" or \"hide\".\n\t\t * @param {string} targetId      Field id that is being targed by conditional logic.\n\t\t * @param {Array}  defaultValues Array of initial field values.\n\t\t * @param {bool}   isInit        True if this is the initial load of the page. False if not.\n\t\t */\n\t\tself.handlePostConditionalLogic = function( formId, action, targetId, defaultValues, isInit ) {\n\t\t\tif ( formId != self.formId ) {\n\n\t\t\t} else if ( targetId == self.GFCCField ) {\n\t\t\t\tgform.ppcp.stateManager.set( 'fieldVisible', action == 'show' );\n\t\t\t} else if ( targetId == self.submitButtonId ) {\n\t\t\t\tgform.ppcp.stateManager.set( 'submitVisible', action == 'show' );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Binds hooks, filters and events related to the State Manager.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t */\n\t\tself.bindStateEvents = function() {\n\t\t\t// Binding total change event. Set priority to 51 so it will be triggered after the coupons add-on.\n\t\t\tgform.addFilter( 'gform_product_total', self.handleProductTotalFilter, 51 );\n\n\t\t\t// Binding frontend feed evaluated event.\n\t\t\tgform.addAction( 'gform_frontend_feeds_evaluated', self.handleFrontendFeedsEvaluated );\n\n\t\t\t// Binding paypal field  and submit button conditional logic event.\n\t\t\tgform.addAction( 'gform_post_conditional_logic_field_action', self.handlePostConditionalLogic );\n\n\t\t\t// Abort conditional logic action on PayPal Field to prevent field from being briefly displayed, and then hidden when payment amount is 0.\n\t\t\tgform.addFilter( 'gform_abort_conditional_logic_do_action', function( abort, action, targetId, useAnimation, defaultValues, isInit, formId, callback ) {\n\t\t\t\tif ( formId == self.formId && targetId == self.GFCCField ) {\n\t\t\t\t\tabort = true;\n\t\t\t\t}\n\t\t\t\treturn abort;\n\t\t\t} );\n\n\t\t\t// Binding currency change.\n\t\t\t$( self.form ).on( 'select change', function() {\n\t\t\t\tgform.ppcp.stateManager.set( 'currency', self.getCurrentCurrencyCode() );\n\t\t\t} );\n\n\t\t\t// Binding to payment method change ( i.e. Credit Card or PayPal Checkout ).\n\t\t\tself.paymentMethodField.on( 'change', function() {\n\t\t\t\tgform.ppcp.stateManager.set( 'paymentMethod', self.paymentMethodField.val() );\n\t\t\t\tself.resetCardErrors();\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Determines if PayPal Buttons fields have been rendered.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @return {bool} Returns true if PayPal fields have been rendered. Returns false otherwise.\n\t\t */\n\t\tself.isPayPalButtonsRendered = function() {\n\t\t\treturn self.paypalButtonInstances.length > 0;\n\t\t};\n\n\t\t/**\n\t\t * Renders the PayPal Credit Messages placeholder when enabled.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {float} paymentAmount The current amount to be paid.\n\t\t */\n\t\tself.renderCreditMessage = function( paymentAmount ) {\n\t\t\t// If setting to display credit message is disable, don't render the message.\n\t\t\tif ( ! self.displayCreditMessages ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst messagePlaceholder = $( '#gform_wrapper_' + self.formId + ' #paypal_credit_messages' );\n\n\t\t\tif ( messagePlaceholder.length ) {\n\t\t\t\tmessagePlaceholder.attr( 'data-pp-amount', paymentAmount );\n\t\t\t} else {\n\t\t\t\t$( '<div id=\"paypal_credit_messages\" data-pp-message data-pp-style-layout=\"text\" data-pp-style-logo-type=\"inline\" data-pp-style-color=\"black\" data-pp-amount=\"' + paymentAmount + '\"></div>' ).prependTo( self.paypalButtons );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Renders the PayPal Smart buttons and initializes them with the intent and paymentAmount specified.\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {string} intent        Payment intent configured for the active feed ( i.e. authorize, capture or subscription ).\n\t\t * @param {float}  paymentAmount Amount to be paid.\n\t\t */\n\t\tself.renderPayPalButtons = function( intent, paymentAmount ) {\n\t\t\t// Close buttons if they are already rendered.\n\t\t\tself.closePayPalButtons();\n\n\t\t\t// Render buttons.\n\t\t\tconst btnArgs = self.getPayPalButtonArgs( intent );\n\t\t\tself.updatePayPalScriptIntent( intent );\n\n\t\t\tconst button = paypal.Buttons( btnArgs );\n\t\t\tbutton.render( '#gform_ppcp_smart_payment_buttons_' + self.formId );\n\n\t\t\tself.paypalButtonInstances.push( button );\n\n\t\t\t// Render credit message if enabled.\n\t\t\tself.renderCreditMessage( paymentAmount );\n\t\t};\n\n\t\t/**\n\t\t * Returns the payment amount given the active feed and the current total.\n\t\t *\n\t\t * @param {object} activeFeed Current active feed.\n\t\t * @param {float}  total      Form total as displayed on the form\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @return {float} Returns the payment amount. Takes into account which product is configured in the feed.\n\t\t */\n\t\tself.getPaymentAmount = function( activeFeed, total ) {\n\t\t\tlet paymentAmount = total;\n\n\t\t\tif ( activeFeed.paymentAmount !== 'form_total' ) {\n\t\t\t\tlet price = GFMergeTag.getMergeTagValue( self.formId, activeFeed.paymentAmount, ':price' ),\n\t\t\t\t\tqty = GFMergeTag.getMergeTagValue( self.formId, activeFeed.paymentAmount, ':qty' );\n\n\t\t\t\tif ( typeof price === 'string' ) {\n\t\t\t\t\tprice = GFMergeTag.getMergeTagValue( self.formId, activeFeed.paymentAmount + '.2', ':price' );\n\t\t\t\t\tqty = GFMergeTag.getMergeTagValue( self.formId, activeFeed.paymentAmount + '.3', ':qty' );\n\t\t\t\t}\n\n\t\t\t\tpaymentAmount = price * qty;\n\t\t\t}\n\n\t\t\treturn paymentAmount;\n\t\t};\n\n\t\t/**\n\t\t * Initializes the Credit Card hosted fields.\n\t\t *\n\t\t * This is required even before the fields are displayed, even if they will never be displayed.\n\t\t * A token is generated the first time the fields are rendered,\n\t\t * if the SDK was reloaded ( for instance to change the currency ) before the fields were rendered then token generation fails.\n\t\t *\n\t\t * @since 2.3\n\t\t *\n\t\t */\n\t\tself.renderCardFields = function() {\n\t\t\tconst placeholder_1 = $( '#input_' + self.formId + '_' + self.ccFieldId + '_1' ).text();\n\t\t\tconst placeholder_2 = $( '#input_' + self.formId + '_' + self.ccFieldId + '_2' ).text();\n\t\t\tconst placeholder_3 = $( '#input_' + self.formId + '_' + self.ccFieldId + '_3' ).text();\n\n\t\t\t// Clear the placeholder in <span>.\n\t\t\t$( '#input_' + self.formId + '_' + self.ccFieldId + '_1, #input_' + self.formId + '_' + self.ccFieldId + '_2, #input_' + self.formId + '_' + self.ccFieldId + '_3' ).text( '' );\n\n\t\t\t// Render credit card fields.\n\t\t\tpaypal.HostedFields.render(\n\t\t\t\t{\n\t\t\t\t\tcreateOrder: self.createOrder,\n\t\t\t\t\tstyles: self.cardStyle,\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tnumber: {\n\t\t\t\t\t\t\tselector: '#input_' + self.formId + '_' + self.ccFieldId + '_1',\n\t\t\t\t\t\t\tplaceholder: placeholder_1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcvv: {\n\t\t\t\t\t\t\tselector: '#input_' + self.formId + '_' + self.ccFieldId + '_3',\n\t\t\t\t\t\t\tplaceholder: placeholder_3,\n\t\t\t\t\t\t},\n\t\t\t\t\t\texpirationDate: {\n\t\t\t\t\t\t\tselector: '#input_' + self.formId + '_' + self.ccFieldId + '_2',\n\t\t\t\t\t\t\tplaceholder: placeholder_2,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tfunction( hf ) {\n\t\t\t\t\twindow.__gforms_hf = hf;\n\t\t\t\t\t$( self.form ).attr( 'data-ppcp-card-rendered', true );\n\n\t\t\t\t\thf.on(\n\t\t\t\t\t\t'focus',\n\t\t\t\t\t\tfunction( event ) {\n\t\t\t\t\t\t\tif ( event.emittedBy === 'number' ) {\n\t\t\t\t\t\t\t\twp.a11y.speak(\n\t\t\t\t\t\t\t\t\t$( '#field_' + self.formId + '_' + self.ccFieldId + '_supported_creditcards' ).text()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\thf.on(\n\t\t\t\t\t\t'cardTypeChange',\n\t\t\t\t\t\tfunction( event ) {\n\t\t\t\t\t\t\tlet cardType;\n\t\t\t\t\t\t\tconst cardContainer = $( '#input_' + self.formId + '_' + self.ccFieldId + '_1' ).parents( '.gfield' ).find( '.gform_card_icon_container' );\n\n\t\t\t\t\t\t\tif ( event.cards.length !== 1 ) {\n\t\t\t\t\t\t\t\tcardType = null;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcardType = event.cards[ 0 ].niceType.toLowerCase();\n\n\t\t\t\t\t\t\t\tif ( cardType === 'american express' ) {\n\t\t\t\t\t\t\t\t\tcardType = 'amex';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( ! cardType ) {\n\t\t\t\t\t\t\t\t$( cardContainer ).find( '.gform_card_icon' ).removeClass( 'gform_card_icon_selected gform_card_icon_inactive' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Display the check on card icons.\n\t\t\t\t\t\t\t\t$( cardContainer ).find( '.gform_card_icon' ).removeClass( 'gform_card_icon_selected' ).addClass( 'gform_card_icon_inactive' );\n\t\t\t\t\t\t\t\t$( cardContainer ).find( '.gform_card_icon_' + cardType ).removeClass( 'gform_card_icon_inactive' ).addClass( 'gform_card_icon_selected' );\n\t\t\t\t\t\t\t\t// Check if the credit card is supported.\n\t\t\t\t\t\t\t\tevent.cards[ 0 ].type = cardType;\n\t\t\t\t\t\t\t\tself.isCardSupported( event.cards[ 0 ] );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst cardTypeInput = $( '#ppcp_credit_card_type_' + self.formId );\n\t\t\t\t\t\t\tif ( cardTypeInput.length ) {\n\t\t\t\t\t\t\t\tcardTypeInput.val( event.cards[ 0 ].niceType );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$( self.form ).append( $( '<input type=\"hidden\" name=\"ppcp_credit_card_type\" id=\"ppcp_credit_card_type_' + self.formId + '\" />' ).val( event.cards[ 0 ].niceType ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Handles the form submission for the credit card field processing.\n\t\t *\n\t\t * @param {object} event Form submission event.\n\t\t */\n\t\tself.handleFormSubmission = function( event ) {\n\t\t\tif ( self.isGoPrevPage() ) {\n\t\t\t\tself.removeIdFields();\n\t\t\t} else if ( gform.ppcp.stateManager.get( 'paymentMethod' ) == 'Credit Card' && gform.ppcp.stateManager.get( 'activeFeed' ).intent == 'subscription' ) {\n\t\t\t\t// Credit card checkout is not supported by subscriptions.\n\t\t\t\tself.displayCardError( gforms_ppcp_frontend_strings.card_info_error );\n\t\t\t\tself.resetPayPalStatus();\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst continueDefaultFormSubmission =\n\t\t\t\t! gform.ppcp.stateManager.get( 'activeFeed' ) ||\n\t\t\t\tgform.ppcp.stateManager.get( 'paymentMethod' ) !== 'Credit Card' ||\n\t\t\t\t$( '#gform_save_' + self.formId ).val() === '1' ||\n\t\t\t\t$( self.form ).data( 'gfppcpsubmitting' ) ||\n\t\t\t\tself.paymentAmount <= 0 ||\n\t\t\t\t! self.isCreditCardOnPage() ||\n\t\t\t\tself.isGoPrevPage() ||\n\t\t\t\t( typeof gformIsRecaptchaPending !== 'undefined' && gformIsRecaptchaPending( $( self.form ) ) );\n\n\t\t\tif ( continueDefaultFormSubmission ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tgformAddSpinner( self.formId );\n\t\t\t$( self.form ).data( 'gfppcpsubmitting', true );\n\n\t\t\t// Validate CC fields.\n\t\t\tconst hf = window.__gforms_hf;\n\t\t\tconst state = hf.getState();\n\t\t\tconst formValid = Object.keys( state.fields ).every(\n\t\t\t\tfunction( key ) {\n\t\t\t\t\treturn state.fields[ key ].isValid;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( ! formValid ) {\n\t\t\t\t// Let the customer know their fields are invalid.\n\t\t\t\tself.displayCardError( gforms_ppcp_frontend_strings.card_info_error );\n\t\t\t\tself.resetPayPalStatus();\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tself.resetCardErrors();\n\n\t\t\t// CC fields are valid, submit hosted fields card data to PayPal.\n\t\t\tconst cardData = {\n\t\t\t\tcontingencies: [ 'SCA_WHEN_REQUIRED' ],\n\t\t\t};\n\n\t\t\t// Card holder name is not hidden.\n\t\t\tif ( $( '#input_' + self.formId + '_' + self.ccFieldId + '_5' ).length ) {\n\t\t\t\tcardData.cardholderName = $( '#input_' + self.formId + '_' + self.ccFieldId + '_5' ).val();\n\t\t\t}\n\n\t\t\thf.submit( cardData ).then(\n\t\t\t\tfunction( payload ) {\n\t\t\t\t\t// Needed only when 3-D Secure contingency applied\n\t\t\t\t\tif ( payload.liabilityShifted === undefined ) {\n\t\t\t\t\t\t// Handle no 3-D Secure contingency passed scenario\n\t\t\t\t\t\t$( self.form ).submit();\n\t\t\t\t\t} else if ( payload.liabilityShifted ) {\n\t\t\t\t\t\t// Handle Buyer confirmed 3-D Secure successfully\n\t\t\t\t\t\t$( self.form ).submit();\n\t\t\t\t\t} else if ( payload.authenticationReason === 'SKIPPED_BY_BUYER' ) {\n\t\t\t\t\t\t// Handle buyer skipped 3-D Secure use-case\n\t\t\t\t\t\tconst result = confirm( gforms_ppcp_frontend_strings.skipped_by_buyer );\n\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\t$( self.form ).submit();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.displayCardError( gforms_ppcp_frontend_strings.threed_secure_error );\n\t\t\t\t\t\tself.resetPayPalStatus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( error ) {\n\t\t\t\t\tself.resetPayPalStatus();\n\t\t\t\t\t// Supported card types cannot be detected by the validityChange event,\n\t\t\t\t\t// but only after submitting the fields, an error would be thrown.\n\t\t\t\t\tif ( error.hasOwnProperty( 'details' ) ) {\n\t\t\t\t\t\tself.displayCardError( error.details[ 0 ].description );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Updates the currently used currency and updates the PayPal currency argument in the SDK url accordingly.\n\t\t *\n\t\t * @param  currentCurrency\n\t\t * @param  scriptLoadedCallback\n\t\t * @since 2.3\n\t\t *\n\t\t */\n\t\tself.resetPayPalScript = function( currentCurrency, scriptLoadedCallback ) {\n\t\t\tlet paypalScript = $( '#gform_paypal_sdk-js' );\n\t\t\tif ( ! paypalScript.length || self.updatingCurrencyInProgress ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.updatingCurrencyInProgress = true;\n\n\t\t\tgformAddSpinner( self.formId );\n\n\t\t\t// Disable all elements in the form until the new SDK is loaded.\n\t\t\tself.disableForm();\n\n\t\t\t// Get the current SDK attributes and current UI state of the field.\n\t\t\tconst sdkNewCurrencySrc = paypalScript.attr( 'src' ).replace( /currency=\\w{3}/, 'currency=' + currentCurrency );\n\t\t\tconst attributionId = paypalScript.attr( 'data-partner-attribution-id' );\n\n\t\t\t// Remove current script and PayPal instances\n\t\t\tpaypalScript.remove();\n\t\t\tself.destroyPayPalButtons();\n\n\t\t\t// Add a new script with same attributes.\n\t\t\t// Append to head but don't change the src yet so we can hook the onload method.\n\t\t\t$( '<script>' )\n\t\t\t\t.attr( 'id', 'gform_paypal_sdk-js' )\n\t\t\t\t.appendTo( 'head' );\n\n\t\t\tpaypalScript = $( '#gform_paypal_sdk-js' );\n\t\t\tpaypalScript[ 0 ].onload = function() {\n\t\t\t\tpaypalScript.attr( 'data-identifier', 'gform_ppcp_js_sdk' ).attr( 'data-partner-attribution-id', attributionId );\n\n\t\t\t\tself.updatingCurrencyInProgress = false;\n\n\t\t\t\tscriptLoadedCallback();\n\t\t\t};\n\n\t\t\tpaypalScript.attr( 'src', sdkNewCurrencySrc );\n\t\t};\n\n\t\t/**\n\t\t * Filters form feeds after conditional logic has been evaluated to get the first PPCP active feed.\n\t\t * If there are more than one active feed for any payment add-on, only the first one is honored.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @param {Array} feeds All form feeds.\n\t\t *\n\t\t * @return {boolean|object} The first active feed object or false if no active feeds exist.\n\t\t */\n\t\tself.getActiveFeed = function( feeds ) {\n\t\t\tconst activePPCPFeeds = feeds.filter( function( feed ) {\n\t\t\t\treturn feed.addonSlug === 'gravityformsppcp' && feed.isActivated;\n\t\t\t} );\n\n\t\t\tif ( activePPCPFeeds.length == 0 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst activeFeeds = Object.values( self.feeds ).filter( function( feed ) {\n\t\t\t\treturn feed.feedId == activePPCPFeeds[ 0 ].feedId;\n\t\t\t} );\n\n\t\t\treturn activeFeeds.length ? activeFeeds[ 0 ] : false;\n\t\t};\n\n\t\t/**\n\t\t * Checks if the payment method selector should be hidden according to the feed's supported payment methods.\n\t\t *\n\t\t * Subscription feeds do not support credit card field as they are not supported by the subscriptions API\n\t\t *\n\t\t * @since 2.4\n\t\t *\n\t\t * @param {Array} paymentMethods Array of available payment methods.\n\t\t */\n\t\tself.showHidePaymentMethodSelector = function( paymentMethods ) {\n\t\t\tif ( paymentMethods.length <= 1 ) {\n\t\t\t\tself.paymentMethodField.hide();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tself.paymentMethodField.show();\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * Builds the smart buttons arguments array according to feed type.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @param {string} intent The payment intent condigured by the current active feed (i.e. capture, authorize or subscription)\n\t\t */\n\t\tself.getPayPalButtonArgs = function( intent ) {\n\t\t\tconst btnArgs = {\n\t\t\t\tstyle: {\n\t\t\t\t\tlayout: self.smartPaymentButtons.buttonsLayout,\n\t\t\t\t\tcolor: self.smartPaymentButtons.buttonsColor,\n\t\t\t\t\tshape: self.smartPaymentButtons.buttonsShape,\n\t\t\t\t},\n\t\t\t\tonInit( buttonProperties ) {\n\t\t\t\t\tself.enableForm();\n\t\t\t\t},\n\t\t\t\tonError( error ) {\n\t\t\t\t\tconsole.log( error );\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif ( intent === 'authorize' || intent === 'capture' ) {\n\t\t\t\tbtnArgs.onApprove = self.onOrderApprove;\n\t\t\t\tbtnArgs.createOrder = self.createOrder;\n\t\t\t} else if ( intent === 'subscription' ) {\n\t\t\t\tbtnArgs.createSubscription = self.createSubscription;\n\t\t\t\tbtnArgs.onApprove = self.onSubscriptionApprove;\n\t\t\t\tbtnArgs.onError = self.onSubscriptionError;\n\t\t\t\tbtnArgs.onCancel = self.onSubscriptionCancel;\n\t\t\t\tbtnArgs.fundingSource = self.PayPalFunding;\n\t\t\t}\n\n\t\t\treturn btnArgs;\n\t\t};\n\n\t\t/**\n\t\t * Sets the PayPal script src intent attribute according to feed type.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @param {string} intent The payment intent condigured by the current active feed (i.e. capture, authorize or subscription)\n\t\t */\n\t\tself.updatePayPalScriptIntent = function( intent ) {\n\t\t\tconst scriptTag = $( 'script[data-identifier=\"gform_ppcp_js_sdk\"]' );\n\n\t\t\t// Sometimes the SDK hasn't been loaded yet, return as this will be called again once the SDK completes loading.\n\t\t\tif ( scriptTag.length <= 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet src = scriptTag.attr( 'src' );\n\t\t\t// Reset intent.\n\t\t\tsrc = src.replace( '&intent=authorize', '' ).replace( '&intent=subscription', '' ).replace( '&vault=true', '' ).replace( '&intent=capture', '' );\n\t\t\tif ( intent === 'authorize' || intent === 'capture' ) {\n\t\t\t\tsrc += '&intent=' + intent;\n\t\t\t} else if ( intent === 'subscription' ) {\n\t\t\t\tsrc += '&vault=true&intent=subscription';\n\t\t\t}\n\t\t\tscriptTag.attr( 'src', src );\n\t\t};\n\n\t\t/**\n\t\t * Applied the class name \"gform_ppcp_field_price\" to fields that\n\t\t * affect the conditional logic.\n\t\t */\n\t\tself.applyPriceClass = function() {\n\t\t\tif ( window.gf_form_conditional_logic === undefined || window.gf_form_conditional_logic[ self.formId ] === undefined ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst fieldsKey = Object.keys( window.gf_form_conditional_logic[ self.formId ].fields );\n\t\t\tconst fieldsValue = Object.values( window.gf_form_conditional_logic[ self.formId ].fields );\n\t\t\tconst fields = [];\n\n\t\t\tfor ( let i = 0; i < fieldsValue.length; i++ ) {\n\t\t\t\tif ( fieldsValue[ i ].length ) {\n\t\t\t\t\tfields.push( fieldsKey[ i ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < fields.length; i++ ) {\n\t\t\t\t$( '#field_' + self.formId + '_' + fields[ i ] ).not( '.gfield_price' ).addClass( 'gform_ppcp_field_price' );\n\t\t\t}\n\t\t};\n\n\t\tself.getDiscountTotal = function() {\n\t\t\t/**\n\t\t\t * gform_discount_total\n\t\t\t *\n\t\t\t * Modify the discount total value.\n\t\t\t *\n\t\t\t * @since 2.1\n\t\t\t *\n\t\t\t * @param {float} discountTotal The calculated positive discount total value.\n\t\t\t * @param {int}   formId        The current form id.\n\t\t\t * @param {float} Total         The form total value.\n\t\t\t *\n\t\t\t * @return {float} The modified discount total.\n\t\t\t */\n\t\t\treturn gformRoundPrice( Math.abs( gform.applyFilters( 'gform_ppcp_discount_total', gformRoundPrice( self.discountTotal ), self.formId, gformRoundPrice( self.paymentAmount ) ) ) );\n\t\t};\n\n\t\tself.getOrderData = function() {\n\t\t\tself.items = [];\n\t\t\tself.subTotal = self.shipping = 0;\n\t\t\tself.total = 0;\n\t\t\tself.discountTotal = 0;\n\n\t\t\t$.ajax(\n\t\t\t\t{\n\t\t\t\t\tasync: false,\n\t\t\t\t\turl: gforms_ppcp_frontend_strings.ajaxurl,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'gfppcp_get_order_data',\n\t\t\t\t\t\tnonce: gforms_ppcp_frontend_strings.create_order_nonce,\n\t\t\t\t\t\tform_id: self.formId,\n\t\t\t\t\t\tfeed_id: gform.ppcp.stateManager.get( 'activeFeed' ).feedId,\n\t\t\t\t\t\tdata: $( self.form ).serialize(),\n\t\t\t\t\t},\n\t\t\t\t\tsuccess( response ) {\n\t\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t\tself.items = response.data.items;\n\t\t\t\t\t\t\tself.subTotal = gformRoundPrice( response.data.subTotal );\n\t\t\t\t\t\t\tself.total = gformRoundPrice( response.data.total );\n\t\t\t\t\t\t\tself.discountTotal = Math.abs( gformRoundPrice( response.data.discountTotal ) );\n\t\t\t\t\t\t\t//gformUpdateTotalFieldPrice( self.formId, self.total );\n\t\t\t\t\t\t\tself.shipping = gformRoundPrice( response.data.shipping );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tself.getMergeTagValue = function( field ) {\n\t\t\tif ( field === '' ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn GFMergeTag.replaceMergeTags( self.formId, '{:' + field + '}' );\n\t\t};\n\n\t\tself.updateOrderDetails = function() {\n\t\t\tconst activeFeed = gform.ppcp.stateManager.get( 'activeFeed' );\n\n\t\t\tconst payer = {\n\t\t\t\tname: {\n\t\t\t\t\tgiven_name: self.getMergeTagValue( activeFeed.first_name ),\n\t\t\t\t\tsurname: self.getMergeTagValue( activeFeed.last_name ),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif ( self.countryCode !== '' ) {\n\t\t\t\tpayer.address = {\n\t\t\t\t\taddress_line_1: self.getMergeTagValue( activeFeed.address_line1 ),\n\t\t\t\t\taddress_line_2: self.getMergeTagValue( activeFeed.address_line2 ),\n\t\t\t\t\tadmin_area_2: self.getMergeTagValue( activeFeed.address_city ),\n\t\t\t\t\tadmin_area_1: self.getMergeTagValue( activeFeed.address_state ),\n\t\t\t\t\tpostal_code: self.getMergeTagValue( activeFeed.address_zip ),\n\t\t\t\t\tcountry_code: self.countryCode,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( self.getMergeTagValue( activeFeed.email ) !== '' ) {\n\t\t\t\tpayer.email_address = self.getMergeTagValue( activeFeed.email );\n\t\t\t}\n\t\t\tconst shipping = ( activeFeed.no_shipping === '1' ) ? 'NO_SHIPPING' : 'GET_FROM_FILE';\n\t\t\tconst shippingDetails = ( activeFeed.no_shipping === '0' ) ? {\n\t\t\t\tname: {\n\t\t\t\t\tfull_name: self.getMergeTagValue( activeFeed.first_name ) + ' ' + self.getMergeTagValue( activeFeed.last_name ),\n\t\t\t\t},\n\t\t\t} : {};\n\n\t\t\tif ( shipping !== 'NO_SHIPPING' && self.countryCode !== '' ) {\n\t\t\t\tshippingDetails.address = payer.address;\n\t\t\t}\n\n\t\t\tconst breakdown = {\n\t\t\t\titem_total: {\n\t\t\t\t\tvalue: gformRoundPrice( self.subTotal ).toString(),\n\t\t\t\t\tcurrency_code: self.getCurrentCurrencyCode(),\n\t\t\t\t},\n\t\t\t\tshipping: {\n\t\t\t\t\tvalue: gformRoundPrice( self.shipping ).toString(),\n\t\t\t\t\tcurrency_code: self.getCurrentCurrencyCode(),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// Get discount.\n\t\t\tconst discountTotal = self.getDiscountTotal();\n\t\t\tif ( discountTotal > 0 ) {\n\t\t\t\tbreakdown.discount = {\n\t\t\t\t\tvalue: Math.abs( discountTotal ).toString(),\n\t\t\t\t\tcurrency_code: self.getCurrentCurrencyCode(),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Make sure items have the same currency as order currency.\n\t\t\tfor ( const orderItem of self.items ) {\n\t\t\t\torderItem.unit_amount.currency_code = self.getCurrentCurrencyCode();\n\t\t\t}\n\n\t\t\tconst purchase_units = [ {\n\t\t\t\tamount: {\n\t\t\t\t\tvalue: gformRoundPrice( self.paymentAmount ).toString(),\n\t\t\t\t\tcurrency_code: self.getCurrentCurrencyCode(),\n\t\t\t\t\tbreakdown,\n\t\t\t\t},\n\t\t\t\tdescription: activeFeed.feedName,\n\t\t\t\titems: self.items,\n\t\t\t} ];\n\n\t\t\tif ( shipping !== 'NO_SHIPPING' ) {\n\t\t\t\tpurchase_units[ 0 ].shipping = shippingDetails;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tpayer,\n\t\t\t\tpurchase_units,\n\t\t\t\tapplication_context: {\n\t\t\t\t\tshipping_preference: shipping,\n\t\t\t\t},\n\t\t\t};\n\t\t};\n\n\t\tself.createOrder = async function() {\n\t\t\tlet orderID = '';\n\n\t\t\tif ( self.orderIdField.length ) {\n\t\t\t\treturn self.orderIdField.val();\n\t\t\t}\n\n\t\t\tself.countryCode = self.getMergeTagValue( gform.ppcp.stateManager.get( 'activeFeed' ).address_country );\n\t\t\tif ( self.countryCode !== '' ) {\n\t\t\t\t// It could just be a country value, but not code yet.\n\t\t\t\tawait self.getCountryCode( self.countryCode );\n\t\t\t}\n\n\t\t\tawait self.getOrderData();\n\n\t\t\tawait fetch(\n\t\t\t\tgforms_ppcp_frontend_strings.ajaxurl + '?action=gfppcp_create_order',\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'content-type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnonce: gforms_ppcp_frontend_strings.create_order_nonce,\n\t\t\t\t\t\t\tdata: self.updateOrderDetails(),\n\t\t\t\t\t\t\tform_id: self.formId,\n\t\t\t\t\t\t\tfeed_id: gform.ppcp.stateManager.get( 'activeFeed' ).feedId,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tfunction( res ) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tfunction( response ) {\n\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\torderID = response.data.orderID;\n\t\t\t\t\t\t$( self.form ).append( $( '<input type=\"hidden\" id=\"gf_ppcp_order_id_' + self.formId + '\" name=\"ppcp_order_id\" />' ).val( orderID ) );\n\t\t\t\t\t\tself.resetCardErrors();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.displayCardError( response.data.message );\n\t\t\t\t\t\tself.resetPayPalStatus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn orderID;\n\t\t};\n\n\t\tself.onOrderApprove = function( data, actions ) {\n\t\t\tgformAddSpinner( self.formId );\n\n\t\t\t$( self.form ).submit();\n\t\t};\n\n\t\t/**\n\t\t * Disable all elements in the form.\n\t\t *\n\t\t * This is needed to prevent any changes in the form that might break ongoing operations like rendering the smart buttons or reloading the SDK.\n\t\t *\n\t\t * @since 2.3\n\t\t *\n\t\t */\n\t\tself.disableForm = function() {\n\t\t\tif ( $( self.form ).data( 'gform-disabled' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$( self.form )\n\t\t\t\t.data( 'gform-disabled', true )\n\t\t\t\t.find( 'input, select, textarea' )\n\t\t\t\t.each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\t$( this ).data( 'gform-disabled-initial-value', $( this ).prop( 'disabled' ) );\n\t\t\t\t\t\t$( this ).prop( 'disabled', true );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Resets all elements to their initial disabled status before calling disableForm().\n\t\t *\n\t\t * @since 2.3\n\t\t *\n\t\t */\n\t\tself.enableForm = function() {\n\t\t\tif ( ! $( self.form ).data( 'gform-disabled' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$( self.form )\n\t\t\t\t.data( 'gform-disabled', false )\n\t\t\t\t.find( 'input, select, textarea' )\n\t\t\t\t.each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\t$( this ).prop( 'disabled', $( this ).data( 'gform-disabled-initial-value' ) );\n\t\t\t\t\t\t$( this ).removeAttr( 'gform-disabled-initial-value' );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Creates a PayPal subscription.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @param {object} data\n\t\t * @param {object} actions\n\t\t */\n\t\tself.createSubscription = async function( data, actions ) {\n\t\t\tgformAddSpinner( self.formId );\n\n\t\t\t// If we already have a subscription id, submit form.\n\t\t\tif ( self.subscriptionIdField.length ) {\n\t\t\t\t$( self.form ).submit();\n\t\t\t}\n\n\t\t\t// Get plan ID  or create a new one if no plan matches the current subscription properties.\n\t\t\tlet subscriptionRequest = '';\n\t\t\tawait fetch(\n\t\t\t\tgforms_ppcp_frontend_strings.ajaxurl + '?action=gfppcp_create_subscription',\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'content-type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnonce: gforms_ppcp_frontend_strings.create_subscription_nonce,\n\t\t\t\t\t\t\tform_data: $( self.form ).serialize(),\n\t\t\t\t\t\t\tform_id: self.formId,\n\t\t\t\t\t\t\tfeed_id: gform.ppcp.stateManager.get( 'activeFeed' ).feedId,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tfunction( res ) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tfunction( response ) {\n\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\tsubscriptionRequest = response.data;\n\t\t\t\t\t\tself.resetCardErrors();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.displayCardError( response.data.message );\n\t\t\t\t\t\tself.resetPayPalStatus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tsubscriptionRequest.application_context.user_action = 'CONTINUE';\n\t\t\treturn actions.subscription.create( subscriptionRequest );\n\t\t};\n\n\t\t/**\n\t\t * Fires when user approves a subscription created using smart buttons.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @param {object} data\n\t\t * @param {object} actions\n\t\t */\n\t\tself.onSubscriptionApprove = function( data, actions ) {\n\t\t\t// Appeand created subscription ID to form.\n\t\t\tif ( self.subscriptionIdField.length === 0 ) {\n\t\t\t\t$( self.form ).append( $( '<input type=\"hidden\" id=\"gf_' + self.formId + '_ppcp_subscription_id\" name=\"ppcp_subscription_id\" />' ).val( data.subscriptionID ) );\n\t\t\t}\n\n\t\t\t$( self.form ).submit();\n\t\t};\n\n\t\t/**\n\t\t * Fires when an error ocures while creating a subscription using smart buttons.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t */\n\t\tself.onSubscriptionError = function() {\n\t\t\tself.displayCardError( gforms_ppcp_frontend_strings.catch_all_error );\n\t\t};\n\n\t\t/**\n\t\t * Fires when the user cancels creating a subscription using smart buttons.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t */\n\t\tself.onSubscriptionCancel = function() {\n\t\t\tself.resetCardErrors();\n\t\t\tself.hideFormSpinner();\n\t\t};\n\n\t\tself.getCountryCode = function( country ) {\n\t\t\treturn $.ajax(\n\t\t\t\t{\n\t\t\t\t\tasync: false,\n\t\t\t\t\turl: gforms_ppcp_frontend_strings.ajaxurl,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'gfppcp_get_country_code',\n\t\t\t\t\t\tnonce: gforms_ppcp_frontend_strings.on_approve_nonce,\n\t\t\t\t\t\tcountry,\n\t\t\t\t\t\tfeed_id: gform.ppcp.stateManager.get( 'activeFeed' ).feedId,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess( response ) {\n\t\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t\tself.countryCode = response.data.code;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tself.isCreditCardOnPage = function() {\n\t\t\tconst currentPage = self.getCurrentPageNumber();\n\n\t\t\t// if current page is false or no credit card page number, assume this is not a multi-page form.\n\t\t\tif ( ! self.ccPage || ! currentPage ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn self.ccPage === currentPage;\n\t\t};\n\n\t\tself.getCurrentPageNumber = function() {\n\t\t\tconst currentPageInput = $( '#gform_source_page_number_' + self.formId );\n\n\t\t\treturn currentPageInput.length > 0 ? parseInt( currentPageInput.val(), 10 ) : false;\n\t\t};\n\n\t\tself.isLastPage = function() {\n\t\t\tconst targetPageInput = $( '#gform_target_page_number_' + self.formId );\n\t\t\tif ( targetPageInput.length > 0 ) {\n\t\t\t\treturn targetPageInput.val() === '0';\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tself.isCardSupported = function( card ) {\n\t\t\tif ( $.inArray( card.type, Object.keys( window.gf_cc_rules ) ) === -1 ) {\n\t\t\t\tself.displayCardError( card.niceType + ' ' + gforms_ppcp_frontend_strings.card_not_supported );\n\t\t\t} else {\n\t\t\t\tself.resetCardErrors();\n\t\t\t}\n\t\t};\n\n\t\tself.displayCardError = function( message ) {\n\t\t\tif ( typeof message === 'undefined' ) {\n\t\t\t\tmessage = '';\n\t\t\t}\n\n\t\t\tconst messageContainer = self.getMessageContainerSelector();\n\n\t\t\tif ( ! $( messageContainer ).find( '.validation_message' ).length ) {\n\t\t\t\t$( messageContainer ).append( '<div class=\"gfield_description validation_message gfield_validation_message\"></div>' );\n\t\t\t}\n\n\t\t\tconst cardErrors = self.getCardErrors();\n\n\t\t\tif ( message !== '' ) {\n\t\t\t\t$( messageContainer ).addClass( 'gfield_error' );\n\t\t\t\t$( cardErrors[ 0 ] ).html( message ).show();\n\t\t\t\t// Announce the error to the screen reader.\n\t\t\t\twp.a11y.speak( message, 'assertive' );\n\t\t\t\tself.hideFormSpinner();\n\n\t\t\t\t// Display main field so that error is not hidden.\n\t\t\t\tself.showHidePayPalField( 'block' );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Resets field error state and removes any displayed errors.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t */\n\t\tself.resetCardErrors = function() {\n\t\t\tconst messageContainer = self.getMessageContainerSelector();\n\t\t\tconst cardErrors = self.getCardErrors();\n\t\t\t$( messageContainer ).removeClass( 'gfield_error' );\n\t\t\t$( cardErrors[ 0 ] ).html( '' ).hide();\n\t\t};\n\n\t\t/**\n\t\t * Gets the selector of the container div in which an error message will be displayed.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * return {string}\n\t\t *\n\t\t */\n\t\tself.getMessageContainerSelector = function() {\n\t\t\treturn self.GFCCField;\n\t\t};\n\n\t\t/**\n\t\t * Gets a list of error elements within the card message container.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t * @return {jQuery} an array of elements that contain error messages.\n\t\t */\n\t\tself.getCardErrors = function() {\n\t\t\tconst messageContainer = self.getMessageContainerSelector();\n\t\t\treturn $( messageContainer ).find( '.validation_message' );\n\t\t};\n\n\t\t/**\n\t\t * Hides the form spinner that appears next to submit button.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t */\n\t\tself.hideFormSpinner = function() {\n\t\t\tif ( $( '#gform_ajax_spinner_' + self.formId ).length > 0 ) {\n\t\t\t\t$( '#gform_ajax_spinner_' + self.formId ).remove();\n\t\t\t}\n\t\t};\n\n\t\tself.resetPayPalStatus = function() {\n\t\t\t$( self.form ).data( 'gfppcpsubmitting', false );\n\t\t\tself.hideFormSpinner();\n\n\t\t\t// must do this or the form cannot be submitted again\n\t\t\tif ( self.isLastPage() ) {\n\t\t\t\twindow[ 'gf_submitting_' + self.formId ] = false;\n\t\t\t}\n\t\t};\n\n\t\tself.isGoPrevPage = function() {\n\t\t\t// don't create card token if clicking on the Previous button.\n\t\t\tconst sourcePage = parseInt( $( '#gform_source_page_number_' + self.formId ).val(), 10 );\n\t\t\tconst targetPage = parseInt( $( '#gform_target_page_number_' + self.formId ).val(), 10 );\n\n\t\t\treturn sourcePage > targetPage && targetPage !== 0;\n\t\t};\n\n\t\t/**\n\t\t * Removes PayPal order ID and subscription ID fields when order details change.\n\t\t *\n\t\t * @since 2.0\n\t\t *\n\t\t */\n\t\tself.removeIdFields = function() {\n\t\t\tself.orderIdField.remove();\n\t\t\tself.subscriptionIdField.remove();\n\t\t};\n\n\t\t/**\n\t\t * Returns the currently used currency code.\n\t\t *\n\t\t * @since 2.3\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tself.getCurrentCurrencyCode = function() {\n\t\t\tlet code = '';\n\t\t\tconst currentCurrency = new Currency( gf_global.gf_currency_config );\n\n\t\t\tif ( 'getCode' in currentCurrency === false || typeof currentCurrency.getCode !== 'function' ) {\n\t\t\t\tconst supportedCurrencies = gforms_ppcp_frontend_strings.currencies;\n\t\t\t\tfor ( const supportedCurrencyCode of Object.keys( supportedCurrencies ) ) {\n\t\t\t\t\tif ( supportedCurrencies[ supportedCurrencyCode ].name === gf_global.gf_currency_config.name ) {\n\t\t\t\t\t\tcode = supportedCurrencyCode;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode = currentCurrency.getCode();\n\t\t\t}\n\n\t\t\tif ( ! code ) {\n\t\t\t\treturn self.currency;\n\t\t\t}\n\n\t\t\treturn code;\n\t\t};\n\n\t\t/**\n\t\t * Checks if paypal instances exist and destroys them if they are fully loaded.\n\t\t *\n\t\t * @since 2.3\n\t\t *\n\t\t */\n\t\tself.destroyPayPalButtons = function() {\n\t\t\ttry {\n\t\t\t\tlet buttonsClosed = false;\n\t\t\t\twhile ( buttonsClosed === false ) {\n\t\t\t\t\tbuttonsClosed = self.closePayPalButtons();\n\t\t\t\t}\n\n\t\t\t\t// delete all paypal related instances.\n\t\t\t\tObject.keys( window ).forEach( ( key ) => {\n\t\t\t\t\tif ( /paypal|zoid|post_robot/.test( key ) ) {\n\t\t\t\t\t\tdelete window[ key ];\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tself.paypalButtons.html( '' );\n\t\t\t} catch ( e ) {\n\n\t\t\t}\n\t\t};\n\n\t\tself.closePayPalButtons = function() {\n\t\t\tif ( self.paypalButtonInstances.length == 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfor ( const buttonInstance of self.paypalButtonInstances ) {\n\t\t\t\ttry {\n\t\t\t\t\tbuttonInstance.close();\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tself.init();\n\t};\n}( jQuery ) );\n"],"names":["_typeof","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_toPropertyKey","input","hint","prim","toPrimitive","res","String","_defineProperty","_defineProperties","target","props","descriptor","PPCPStateManager","initialState","stateChangeCallback","instance","Constructor","prevState","markedDirty","timeoutID","isInitialChange","set","protoProps","includes","_maybeClearTimeout","setTimeout","_invokeStateChanged","bind","dirtyProps","_getDirtyProps","_reset","clearTimeout","dirty","window","GFPPCP","gform","extensions","styles","gravityformsppcp","$","ppcp","cardStyle","formId","componentStyles","pageInstance","setComponentStyleValue","themeFrameworkStyles","manualElement","resolvedValue","indexOf","computedValue","getPropertyValue","getComputedStyle","replace","toLowerCase","trim","setComponentStyles","objKey","parentKey","form","document","getElementById","firstFormControl","querySelector","objPath","init","paypalButtonInstances","paymentAmount","countryCode","GFCCField","ccFieldId","submitButtonId","paypalButtons","orderIdField","subscriptionIdField","paymentMethodField","PayPalFunding","paypal","FUNDING","PAYPAL","applyPriceClass","currency","paymentMethod","fieldVisible","submitVisible","stateManager","handleStateChange","bindStateEvents","on","handleFormSubmission","changed","activeFeed","getPaymentAmount","total","handleCurrencyChange","handleFeedChange","handleTotalChange","handleVisibilityChange","showHideFields","resetPayPalScript","renderPayPalFields","enableForm","hideFormSpinner","resetCardErrors","ensurePayPalFieldsRendered","renderCreditMessage","getPaymentMethods","supportedPaymentMethods","paymentMethods","isPaymentSelectorVisible","showHidePaymentMethodSelector","isCreditCardEnabled","hasCreditCardPaymentMethod","fieldDisplay","showHidePayPalField","creditCardField","addClass","css","showHideSubmitButton","removeClass","hidePayPalButton","isPayPalButtonsEnabled","buttonDisplay","submitVisibility","display","paypalField","setDirty","visibility","submitButton","isCreditCardRendered","data","renderCardFields","jQuery","renderPayPalButtons","intent","HostedFields","isEligible","isPayPalButtonsRendered","handleProductTotalFilter","handleFrontendFeedsEvaluated","feeds","getActiveFeed","find","handlePostConditionalLogic","action","targetId","defaultValues","isInit","addFilter","addAction","abort","useAnimation","callback","getCurrentCurrencyCode","displayCreditMessages","messagePlaceholder","attr","prependTo","closePayPalButtons","btnArgs","getPayPalButtonArgs","updatePayPalScriptIntent","button","Buttons","render","price","GFMergeTag","getMergeTagValue","qty","placeholder_1","text","placeholder_2","placeholder_3","createOrder","fields","number","selector","placeholder","cvv","expirationDate","hf","__gforms_hf","event","emittedBy","wp","a11y","speak","cardType","cardContainer","parents","cards","niceType","isCardSupported","cardTypeInput","append","isGoPrevPage","removeIdFields","displayCardError","gforms_ppcp_frontend_strings","card_info_error","resetPayPalStatus","preventDefault","isCreditCardOnPage","gformIsRecaptchaPending","gformAddSpinner","getState","every","isValid","cardData","contingencies","cardholderName","submit","payload","liabilityShifted","authenticationReason","confirm","skipped_by_buyer","threed_secure_error","catch","details","description","currentCurrency","scriptLoadedCallback","paypalScript","updatingCurrencyInProgress","disableForm","sdkNewCurrencySrc","attributionId","remove","destroyPayPalButtons","appendTo","onload","activePPCPFeeds","filter","feed","addonSlug","isActivated","activeFeeds","feedId","hide","show","style","layout","smartPaymentButtons","buttonsLayout","color","buttonsColor","shape","buttonsShape","onInit","buttonProperties","onError","console","log","onApprove","onOrderApprove","createSubscription","onSubscriptionApprove","onSubscriptionError","onCancel","onSubscriptionCancel","fundingSource","scriptTag","src","gf_form_conditional_logic","fieldsKey","fieldsValue","not","getDiscountTotal","gformRoundPrice","Math","abs","applyFilters","discountTotal","getOrderData","items","subTotal","shipping","ajax","url","ajaxurl","dataType","nonce","create_order_nonce","form_id","feed_id","serialize","success","response","field","replaceMergeTags","updateOrderDetails","payer","given_name","first_name","surname","last_name","address","address_line_1","address_line1","address_line_2","address_line2","admin_area_2","address_city","admin_area_1","address_state","postal_code","address_zip","country_code","email","email_address","no_shipping","shippingDetails","full_name","breakdown","item_total","toString","currency_code","discount","unit_amount","purchase_units","amount","feedName","application_context","shipping_preference","orderID","address_country","getCountryCode","fetch","headers","body","JSON","stringify","json","message","actions","each","removeAttr","subscriptionRequest","create_subscription_nonce","form_data","user_action","subscription","subscriptionID","catch_all_error","country","on_approve_nonce","code","currentPage","getCurrentPageNumber","ccPage","currentPageInput","parseInt","isLastPage","targetPageInput","card","inArray","gf_cc_rules","card_not_supported","messageContainer","getMessageContainerSelector","cardErrors","getCardErrors","html","sourcePage","targetPage","Currency","gf_global","gf_currency_config","getCode","supportedCurrencies","currencies","supportedCurrencyCode","buttonsClosed","test","e","buttonInstance","close"],"sourceRoot":""}